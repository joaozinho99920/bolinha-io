<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bolinha IO</title>
<style>
    body {margin:0; overflow:hidden; touch-action:none; background:#000;}
    canvas {display:block;}
    #score {
        position:absolute; top:20px; left:50%;
        transform:translateX(-50%);
        color:#0ff; font-size:24px; text-shadow:0 0 10px #0ff;
    }
</style>
</head>
<body>
<div id="score">Pontuação: 0</div>
<canvas id="gameCanvas"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const scoreDisplay = document.getElementById("score");

function resizeCanvas(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

// --- Jogador ---
const player = {
    x: canvas.width/2,
    y: canvas.height/2,
    radius: 30,
    color: "cyan",
    speed: 5,
    targetX: canvas.width/2,
    targetY: canvas.height/2,
    moving: false
};

// --- Bolinhas para comer ---
const foods = [];
const foodCount = 30;
function initFoods(){
    foods.length=0;
    for(let i=0;i<foodCount;i++){
        foods.push({
            x: Math.random()*(canvas.width-20)+10,
            y: Math.random()*(canvas.height-20)+10,
            radius: Math.random()*10 + 5,
            color: `rgb(${Math.random()*255},${Math.random()*255},${Math.random()*255})`
        });
    }
}
initFoods();

// --- Eventos ---
function startMove(e){
    player.moving = true;
    movePlayer(e);
}
function movePlayer(e){
    let rect = canvas.getBoundingClientRect();
    let x, y;
    if(e.touches){ x=e.touches[0].clientX - rect.left; y=e.touches[0].clientY - rect.top; }
    else { x = e.clientX - rect.left; y = e.clientY - rect.top; }
    player.targetX = x; player.targetY = y;
}
function stopMove(){ player.moving = false; }

canvas.addEventListener("mousedown", startMove);
canvas.addEventListener("mousemove", movePlayer);
canvas.addEventListener("mouseup", stopMove);
canvas.addEventListener("touchstart", startMove);
canvas.addEventListener("touchmove", movePlayer);
canvas.addEventListener("touchend", stopMove);

// --- Função para desenhar o jogador ---
function drawPlayer(){
    ctx.beginPath();
    ctx.arc(player.x, player.y, player.radius, 0, Math.PI*2);
    ctx.fillStyle = player.color;
    ctx.shadowColor = "#0ff";
    ctx.shadowBlur = 15;
    ctx.fill();
    ctx.closePath();
}

// --- Atualiza jogador ---
function updatePlayer(){
    if(player.moving){
        let dx = player.targetX - player.x;
        let dy = player.targetY - player.y;
        let distance = Math.sqrt(dx*dx + dy*dy);
        if(distance>player.speed){
            player.x += dx/distance*player.speed;
            player.y += dy/distance*player.speed;
        } else {
            player.x = player.targetX;
            player.y = player.targetY;
        }
        // Limites
        player.x = Math.max(player.radius, Math.min(canvas.width - player.radius, player.x));
        player.y = Math.max(player.radius, Math.min(canvas.height - player.radius, player.y));
    }
}

// --- Desenhar comidas ---
function drawFoods(){
    for(let f of foods){
        ctx.beginPath();
        ctx.arc(f.x, f.y, f.radius, 0, Math.PI*2);
        ctx.fillStyle = f.color;
        ctx.fill();
        ctx.closePath();
    }
}

// --- Comer comidas ---
function checkCollision(){
    for(let i=foods.length-1; i>=0; i--){
        let f = foods[i];
        let dx = player.x - f.x;
        let dy = player.y - f.y;
        let dist = Math.sqrt(dx*dx + dy*dy);
        if(dist < player.radius){
            // Come a comida
            player.radius += f.radius * 0.2; // cresce ao comer
            foods.splice(i,1);
        }
    }
}

// --- Fundo simples ---
function drawBackground(){
    ctx.fillStyle = "#000";
    ctx.fillRect(0,0,canvas.width,canvas.height);
}

// --- Loop do jogo ---
function gameLoop(){
    drawBackground();
    updatePlayer();
    checkCollision();
    drawFoods();
    drawPlayer();
    scoreDisplay.textContent = `Pontuação: ${Math.floor(player.radius*10)}`;
    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
